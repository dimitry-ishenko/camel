///////////////////////////////////////////////////////////////////////////////////////////////////
#ifndef X11_H
#define X11_H

///////////////////////////////////////////////////////////////////////////////////////////////////
#include "process/process.h"

#include <vector>
#include <string>

///////////////////////////////////////////////////////////////////////////////////////////////////
struct _XDisplay;

///////////////////////////////////////////////////////////////////////////////////////////////////
namespace app
{

///////////////////////////////////////////////////////////////////////////////////////////////////
namespace x11
{

///////////////////////////////////////////////////////////////////////////////////////////////////
typedef _XDisplay* display;

///////////////////////////////////////////////////////////////////////////////////////////////////
class server
{
public:
    static const std::string default_name;
    static const std::string default_path;
    static const arguments default_args;

    server() = default;
    server(server&) = delete;
    server(const server&) = delete;

    server(server&& x) = default;

    explicit server(const std::string& auth, const std::string& name= default_name, const std::string& path= default_path, const arguments& args= default_args);
    ~server();

    server& operator=(const server&) = delete;
    server& operator=(server&& x) = default;

    ////////////////////
    const std::string& name() const { return _M_name; }
    const std::string& auth() const { return _M_auth; }

    bool running() { return _M_process.running(); }

    x11::display display() const { return _M_display; }

private:
    std::string _M_name;
    std::string _M_auth;

    process _M_process;
    x11::display _M_display= nullptr;
};

///////////////////////////////////////////////////////////////////////////////////////////////////
}

///////////////////////////////////////////////////////////////////////////////////////////////////
}

///////////////////////////////////////////////////////////////////////////////////////////////////
#endif // X11_H
