///////////////////////////////////////////////////////////////////////////////////////////////////
#include "log.h"

///////////////////////////////////////////////////////////////////////////////////////////////////
namespace app
{

///////////////////////////////////////////////////////////////////////////////////////////////////
void log::logbuf_base::putchar(char c)
{
    if(c == endl)
    {
        syslog(_M_level, "%s", _M_buffer.data());

        _M_buffer.clear();
        _M_level= default_level;
    }
    else _M_buffer+= c;
}

///////////////////////////////////////////////////////////////////////////////////////////////////
log::logbuf_base::~logbuf_base()
{
    if(_M_buffer.size()) putchar(endl);
}

///////////////////////////////////////////////////////////////////////////////////////////////////
log::stream logger;

///////////////////////////////////////////////////////////////////////////////////////////////////
}
