///////////////////////////////////////////////////////////////////////////////////////////////////
// Copyright (c) 2014 Dimitry Ishenko
// Distributed under the GNU GPL v2. For full terms please visit:
// http://www.gnu.org/licenses/gpl.html
//
// Contact: dimitry (dot) ishenko (at) (gee) mail (dot) com

///////////////////////////////////////////////////////////////////////////////////////////////////
#ifndef UTILITY_H
#define UTILITY_H

///////////////////////////////////////////////////////////////////////////////////////////////////
#include <string>
#include <memory>
#include <cstdlib>

///////////////////////////////////////////////////////////////////////////////////////////////////
namespace app
{

///////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////
struct charpp_deleter
{
    void operator()(char* args[])
    {
        if(args)
        {
            for(char** ri= args; *ri; ++ri) free(*ri);
            free(args);
        }
    }
};

typedef std::unique_ptr<char*[], charpp_deleter> charpp_ptr;

///////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////
std::unique_ptr<char[]> clone(const std::string& value);

///////////////////////////////////////////////////////////////////////////////////////////////////
}

///////////////////////////////////////////////////////////////////////////////////////////////////
#endif // UTILITY_H
