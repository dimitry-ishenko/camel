///////////////////////////////////////////////////////////////////////////////////////////////////
#include "arguments.h"
#include <stdexcept>

///////////////////////////////////////////////////////////////////////////////////////////////////
namespace app
{

///////////////////////////////////////////////////////////////////////////////////////////////////
charpp_ptr arguments::to_charpp() const
{
    char** rp= static_cast<char**>(calloc(size()+1, sizeof(char*)));
    if(rp == nullptr) throw std::bad_alloc();

    charpp_ptr x(rp);
    for(auto ri= cbegin(); ri != cend(); ++ri, ++rp) *rp= strdup(ri->data());

    *rp= nullptr;
    return x;
}

///////////////////////////////////////////////////////////////////////////////////////////////////
}
